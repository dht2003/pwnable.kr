# The Actual code I ran on the server to solve the challange 
# Remote connectoin is too slow 


from pwn import *
import time 


def main():
    r =  remote("0", 9007)
    r.recv()
    log.info("Sleeping 3 seconds")
    time.sleep(3)
    log.info("Starting")
    for i in range(100):
        response = r.recvline().decode("utf-8") 
        print(response)
        coins_str , tries_str = response.split()
        _ , n_coins = coins_str.split("=")
        _, n_tries = tries_str.split("=")
        n_coins, n_tries = int(n_coins), int(n_tries)
        log.info("Starting round " + str(i))
        high = n_coins 
        low = 0 
        mid = 0
        weight = 0
        for i in range(n_tries):
                mid = low + (high - low) // 2
                coins = range(low,mid + 1)
                coins_str = " ".join([str(coin) for coin in coins])
                r.sendline(coins_str)
                response = r.recvline().decode("utf-8")
                weight = int(response)
                if weight == 10 and i == (n_tries - 1): 
                    r.sendline(str(mid + 1))
                    continue 
                elif weight == 9 and i == (n_tries - 1):
                    r.sendline(str(low))
                    continue 
                if weight % 10 == 0:
                     low = mid + 1
                else:
                    high = mid 
        response = r.recvline().decode("utf-8")
        log.info(response)
    print(r.recvline().decode("utf-8"))
    print(r.recvline().decode("utf-8"))



if __name__ == "__main__":
    main()
